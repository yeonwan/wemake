import{j as d}from"./jsx-runtime-CEMuh2-_.js";import{r as i}from"./index-l2PZgWEW.js";import{c as y,u as C,a as f}from"./index-D51nZm33.js";import{r as I}from"./index-Ct70n-Yj.js";import{a as N}from"./index-CE8SeZ7l.js";import{c as v}from"./utils-DjqsqOe8.js";var R=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],m=R.reduce((a,t)=>{const n=N(`Primitive.${t}`),r=i.forwardRef((o,e)=>{const{asChild:l,...s}=o,u=l?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),d.jsx(u,{...s,ref:e})});return r.displayName=`Primitive.${t}`,{...a,[t]:r}},{});function K(a,t){a&&I.flushSync(()=>a.dispatchEvent(t))}var p="Avatar",[j,V]=y(p),[_,S]=j(p),x=i.forwardRef((a,t)=>{const{__scopeAvatar:n,...r}=a,[o,e]=i.useState("idle");return d.jsx(_,{scope:n,imageLoadingStatus:o,onImageLoadingStatusChange:e,children:d.jsx(m.span,{...r,ref:t})})});x.displayName=p;var L="AvatarImage",E=i.forwardRef((a,t)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:o=()=>{},...e}=a,l=S(L,n),s=k(r,e),u=C(c=>{o(c),l.onImageLoadingStatusChange(c)});return f(()=>{s!=="idle"&&u(s)},[s,u]),s==="loaded"?d.jsx(m.img,{...e,ref:t,src:r}):null});E.displayName=L;var h="AvatarFallback",w=i.forwardRef((a,t)=>{const{__scopeAvatar:n,delayMs:r,...o}=a,e=S(h,n),[l,s]=i.useState(r===void 0);return i.useEffect(()=>{if(r!==void 0){const u=window.setTimeout(()=>s(!0),r);return()=>window.clearTimeout(u)}},[r]),l&&e.imageLoadingStatus!=="loaded"?d.jsx(m.span,{...o,ref:t}):null});w.displayName=h;function A(a,t){return a?t?(a.src!==t&&(a.src=t),a.complete&&a.naturalWidth>0?"loaded":"loading"):"error":"idle"}function k(a,{referrerPolicy:t,crossOrigin:n}){const r=F(),o=i.useRef(null),e=r?(o.current||(o.current=new window.Image),o.current):null,[l,s]=i.useState(()=>A(e,a));return f(()=>{s(A(e,a))},[e,a]),f(()=>{const u=b=>()=>{s(b)};if(!e)return;const c=u("loaded"),g=u("error");return e.addEventListener("load",c),e.addEventListener("error",g),t&&(e.referrerPolicy=t),typeof n=="string"&&(e.crossOrigin=n),()=>{e.removeEventListener("load",c),e.removeEventListener("error",g)}},[e,n,t]),l}function P(){return()=>{}}function F(){return i.useSyncExternalStore(P,()=>!0,()=>!1)}var M=x,$=E,z=w;function W({className:a,...t}){return d.jsx(M,{"data-slot":"avatar",className:v("relative flex size-8 shrink-0 overflow-hidden rounded-full",a),...t})}function J({className:a,...t}){return d.jsx($,{"data-slot":"avatar-image",className:v("aspect-square size-full",a),...t})}function O({className:a,...t}){return d.jsx(z,{"data-slot":"avatar-fallback",className:v("bg-muted flex size-full items-center justify-center rounded-full",a),...t})}export{W as A,m as P,J as a,O as b,K as d};
